system {
  host-name CE9;
}

interfaces {
    
    lo0 {
      unit 0 {
        family inet address 10.0.0.9/32;        
      }
    }
}
routing-options {
  router-id 10.0.0.9;
  route-distinguisher-id 10.0.0.9;
  autonomous-system 65003;
  forwarding-table export ECMP dynamic-list-next-hop ecmp-fast-reroute;
}
protocols {

  isis {
    export ISIS-L2-to-L1;
    lsp-lifetime 65535;
    spf-options {
      delay 50;
      holddown 2000;
    }
    level 1 {
            wide-metrics-only;
    }
    level 2 {
            wide-metrics-only;
    }
      interface lo0.0;
      interface all {
        ldp-synchronization;
      }   
  }
  lldp {
    port-id-subtype interface-name;
    interface all;
  }

    
}
policy-options {
  policy-statement ECMP {
    then {
      load-balance per-packet;
    }
  }
  policy-statement CE-ROUTES {
    term a {
      from protocol [ ospf direct ];
      then accept;
    }
    term b {
      then reject;
    }
  }
    policy-statement ISIS-L2-to-L1 {
        term 1 {
            from {
                protocol isis;
                level 2;
                tag 2;
            }
            to {
                protocol isis;
                level 1;
            }
            then accept;
        }
        term 2 {
            from {
                protocol isis;
                level 2;
                tag 1;
            }
            to {
                protocol isis;
                level 1;
            }
            then accept;
        }
        term 3 {
            from {
                protocol isis;
                level 2;
                route-filter 10.10.0.0/8 prefix-length-range /32-/32;
            }
            to {
                protocol isis;
                level 1;
            }
            then accept;
        }
        term 4 {
            from {
                protocol isis;
                level 1;
            }
            to {
                protocol isis;
                level 2;
            }
            then accept;
        }
        term 5 {
            from {
                protocol static;
                tag 1;
            }
            to protocol isis;
            then accept;
        }
        term 6 {
            from {
                protocol static;
                tag 2;
            }
            to protocol isis;
            then accept;
        }
    }
}